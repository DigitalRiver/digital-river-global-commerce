!function(t){var c={};function o(r){if(c[r])return c[r].exports;var e=c[r]={i:r,l:!1,exports:{}};return t[r].call(e.exports,e,e.exports,o),e.l=!0,e.exports}o.m=t,o.c=c,o.d=function(r,e,t){o.o(r,e)||Object.defineProperty(r,e,{enumerable:!0,get:t})},o.r=function(r){"undefined"!=typeof Symbol&&Symbol.toStringTag&&Object.defineProperty(r,Symbol.toStringTag,{value:"Module"}),Object.defineProperty(r,"__esModule",{value:!0})},o.t=function(e,r){if(1&r&&(e=o(e)),8&r)return e;if(4&r&&"object"==typeof e&&e&&e.__esModule)return e;var t=Object.create(null);if(o.r(t),Object.defineProperty(t,"default",{enumerable:!0,value:e}),2&r&&"string"!=typeof e)for(var c in e)o.d(t,c,function(r){return e[r]}.bind(null,c));return t},o.n=function(r){var e=r&&r.__esModule?function(){return r.default}:function(){return r};return o.d(e,"a",e),e},o.o=function(r,e){return Object.prototype.hasOwnProperty.call(r,e)},o.p="",o(o.s=0)}([function(r,e,t){"use strict";t.r(e);var c=function(o){var n,r,t,c,a,i,s,d=0,u=0;o(function(){n=o(".products-import-notice"),r=o("#products-import-btn"),t=o("#products-import-msg"),c=o("#products-import-progress"),a=o("#products-import-progress-bar"),i=o("#products-import-progress-count"),s=o("#products-import-progress-total")});var e=function(){o.ajax({type:"POST",url:drgc_admin_params.ajax_url,data:{action:"drgc_ajx_action",nonce:drgc_admin_params.ajax_nonce,step:"fetch_and_cache_products"},success:function(r){m("[Fetch and Cache Products]",r.success?"success":"error",r),r.success?(u=r.data?Object.keys(r.data).length:0)&&(t.text("Importing products..."),p(d,u),l(d)):r.data&&r.data.error&&g("error",r.data.error)}})},l=function e(r){o.ajax({type:"POST",url:drgc_admin_params.ajax_url,data:{action:"drgc_ajx_action",nonce:drgc_admin_params.ajax_nonce,step:"import_each_product",idx:r},success:function(r){m("[Import Each Product]",r.success?"success":"error",r),r.success?(_(++d,u),d<u?e(d):d===u&&setTimeout(function(){var r=new URLSearchParams(location.search);t.text("All products have been imported. Cleaning up..."),c.hide(),r.set("import-complete",!0),window.location.search=r.toString()},3e3)):r.data&&r.data.error&&g("error",r.data.error)}})},p=function(r,e){c.show(),s.text(e),_(r,e)},_=function(r,e){var t=100*(r/e).toFixed(2);a.css("width","".concat(t,"%")),i.text(r)},g=function(r,e){var t=0<arguments.length&&void 0!==r?r:"success",c=1<arguments.length?e:void 0;n.remove(),o('<div class="notice notice-'.concat(t,' is-dismissible products-import-notice"><p>').concat(c,"</p></div>")).insertBefore(".products-import-wrapper")},m=function(r,e,t){switch(e=e||"black"){case"success":e="Green";break;case"info":e="DodgerBlue";break;case"error":e="Red";break;case"warning":e="Orange";break;default:e=e}console.log("%c"+r,"color:"+e,t)};return{importCategories:function(){r.prop("disabled",!0),n.hide(),t.text("Fetching and importing categories...").show(),o.ajax({type:"POST",url:drgc_admin_params.ajax_url,data:{action:"drgc_ajx_action",nonce:drgc_admin_params.ajax_nonce,step:"import_categories"},success:function(r){m("[Import Categories]",r.success?"success":"error",r),r.success?(t.text("All categories have been imported. Fetching products..."),e()):r.data&&r.data.error&&g("error",r.data.error)}})},fetchAndCacheProducts:e,importEachProduct:l,initProgressBar:p,updateProgressBar:_,displayImportNotice:g,colorLog:m}}(jQuery);jQuery(document).ready(function(r){r("#products-import-btn").click(function(r){if(!drgc_admin_params.site_id||!drgc_admin_params.api_key)return alert("Please provide siteID & apiKey!");c.importCategories()})});jQuery(document).ready(function(t){t("#dr-sync-locales-btn").click(function(r){var e=t(r.target);e.addClass("sending"),t.ajax({type:"POST",url:drgc_admin_params.ajax_url,data:{action:"drgc_sync_locales",nonce:drgc_admin_params.ajax_nonce},success:function(){window.location.reload()},error:function(){e.removeClass("sending")}})})});var o;(o=jQuery)(function(){if(o("#drgc_drop_in_config").length){var r=wp.codeEditor.defaultSettings?_.clone(wp.codeEditor.defaultSettings):{};r.codemirror=_.extend({},r.codemirror,{indentUnit:2,tabSize:2}),wp.codeEditor.initialize(o("#drgc_drop_in_config"),r)}});var n=(jQuery,{convertToLocalHours:function(r){var e=new Date("2020-01-01 ".concat(r,":00:00 UTC")).getHours();return((e=0===e?12:12<e?e-12:e)<10?"0":"")+e},convertToUTCHours:function(r){var e=new Date("2020-01-01 ".concat(r,":00:00")).getUTCHours();return((e=0===e?12:12<e?e-12:e)<10?"0":"")+e}});jQuery(document).ready(function(t){var r=(t("#drgc_cron_utc_time").val()||"12:00").split(":"),c=r[0],o=r[1];t("#drgc_cron_handler").change(function(r){var e=t(r.target).is(":checked");t("#drgc_cron_schedule").toggle(e)}),t("#drgc_cron_local_hours").change(function(r){var e=t(r.target).val();c=n.convertToUTCHours(e),t("#drgc_cron_utc_time").val("".concat(c,":").concat(o)),t("#drgc_cron_utc_label").text("".concat(c,":").concat(o))}),t("#drgc_cron_local_minutes").change(function(r){o=t(r.target).val(),t("#drgc_cron_utc_time").val("".concat(c,":").concat(o)),t("#drgc_cron_utc_label").text("".concat(c,":").concat(o))}),t("#drgc_cron_local_hours").val(n.convertToLocalHours(c)),t("#drgc_cron_handler").trigger("change")})}]);