!function(n){var r={};function o(e){if(r[e])return r[e].exports;var t=r[e]={i:e,l:!1,exports:{}};return n[e].call(t.exports,t,t.exports,o),t.l=!0,t.exports}o.m=n,o.c=r,o.d=function(e,t,n){o.o(e,t)||Object.defineProperty(e,t,{enumerable:!0,get:n})},o.r=function(e){"undefined"!=typeof Symbol&&Symbol.toStringTag&&Object.defineProperty(e,Symbol.toStringTag,{value:"Module"}),Object.defineProperty(e,"__esModule",{value:!0})},o.t=function(t,e){if(1&e&&(t=o(t)),8&e)return t;if(4&e&&"object"==typeof t&&t&&t.__esModule)return t;var n=Object.create(null);if(o.r(n),Object.defineProperty(n,"default",{enumerable:!0,value:t}),2&e&&"string"!=typeof t)for(var r in t)o.d(n,r,function(e){return t[e]}.bind(null,r));return n},o.n=function(e){var t=e&&e.__esModule?function(){return e.default}:function(){return e};return o.d(t,"a",t),t},o.o=function(e,t){return Object.prototype.hasOwnProperty.call(e,t)},o.p="",o(o.s=0)}([function(e,t,n){"use strict";n.r(t);jQuery(document).ready(function(o){var a,i,c,s=0,d=1,u=[],p=[],l=[],n=drgc_admin_params.ajax_url,r=drgc_admin_params.ajax_nonce,_=drgc_admin_params.drgc_ajx_instance_id,f=drgc_admin_params.site_id,g=drgc_admin_params.api_key,m=o("#dr-data-process-progressbar"),b=o(".wrapImportControls p"),y=o("#products-import-btn");function h(e,t,n){var r;a=e.entries_count,d=e.batch_size,s=e.index_start,o(".wrapImportControls").find("h4").remove(),m.show(),m.progressbar({max:a,value:0}),b.show(),y.hide(),r=a,o("#dr-data-process-total").text(r),j()}function j(){for(var e,t=0;t<d&&s<a;)u.push(s),s++,t++;u.length?(e={action:"drgc_ajx_action",step:"batchprocess",persist:i,nonce:r,instance_id:_,itemsBeingProcessed:u},o.ajax({dataType:"json",data:e,type:"post",url:n,context:this,nonce:r,success:x})):function(){m.hide(),o(".wrapImportControls").html("<h3><b>Cleaning up...</b></h3>");var e={action:"drgc_ajx_action",step:"end",persist:i,nonce:r,instance_id:_};o.ajax({dataType:"json",data:e,type:"post",url:n,context:this,success:v})}()}function x(e,t,n){var r;o.each(e.results,function(e,t){t.success?p.push(e):"failure"===t&&l.push(e),r=e}),function(e){c=c||o("#dr-data-process-counter");m.progressbar("option","value",e),c.text(e)}(s),u=[],i=e.results[r].persist,j()}function v(e,t,n){window.location.href=e.url}o("#products-import-btn").on("click",function(e){if(e.preventDefault(),!f||!g)return alert("Please provide siteID & apiKey!");y.attr("disabled","disabled"),o(".notice").is(":visible")&&o(".notice").hide(),o(".wrapImportControls").append("<h4> <b>Fetching products, locales and currencies...</b> </h4>");var t={action:"drgc_ajx_action",nonce:r,instance_id:_,step:"init"};o.ajax({dataType:"json",data:t,type:"post",url:n,context:this,nonce:r,success:h})})});jQuery(document).ready(function(n){n("#dr-sync-locales-btn").click(function(e){var t=n(e.target);t.addClass("sending"),n.ajax({type:"POST",url:drgc_admin_params.ajax_url,data:{action:"drgc_sync_locales",nonce:drgc_admin_params.ajax_nonce},success:function(){window.location.reload()},error:function(){t.removeClass("sending")}})})});var r;(r=jQuery)(function(){var e;r("#drgc_drop_in_config").length&&((e=wp.codeEditor.defaultSettings?_.clone(wp.codeEditor.defaultSettings):{}).codemirror=_.extend({},e.codemirror,{indentUnit:2,tabSize:2}),wp.codeEditor.initialize(r("#drgc_drop_in_config"),e))})}]);