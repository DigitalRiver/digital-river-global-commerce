!function(e){var c={};function o(r){if(c[r])return c[r].exports;var t=c[r]={i:r,l:!1,exports:{}};return e[r].call(t.exports,t,t.exports,o),t.l=!0,t.exports}o.m=e,o.c=c,o.d=function(r,t,e){o.o(r,t)||Object.defineProperty(r,t,{enumerable:!0,get:e})},o.r=function(r){"undefined"!=typeof Symbol&&Symbol.toStringTag&&Object.defineProperty(r,Symbol.toStringTag,{value:"Module"}),Object.defineProperty(r,"__esModule",{value:!0})},o.t=function(t,r){if(1&r&&(t=o(t)),8&r)return t;if(4&r&&"object"==typeof t&&t&&t.__esModule)return t;var e=Object.create(null);if(o.r(e),Object.defineProperty(e,"default",{enumerable:!0,value:t}),2&r&&"string"!=typeof t)for(var c in t)o.d(e,c,function(r){return t[r]}.bind(null,c));return e},o.n=function(r){var t=r&&r.__esModule?function(){return r.default}:function(){return r};return o.d(t,"a",t),t},o.o=function(r,t){return Object.prototype.hasOwnProperty.call(r,t)},o.p="",o(o.s=0)}([function(r,t,e){"use strict";e.r(t);var c=function(o){var n,r,e,c,a,i,s,d=0,u=0;o(function(){n=o(".products-import-notice"),r=o("#products-import-btn"),e=o("#products-import-msg"),c=o("#products-import-progress"),a=o("#products-import-progress-bar"),i=o("#products-import-progress-count"),s=o("#products-import-progress-total")});var t=function(){o.ajax({type:"POST",url:drgc_admin_params.ajax_url,data:{action:"drgc_ajx_action",nonce:drgc_admin_params.ajax_nonce,step:"fetch_and_cache_products"},success:function(r){m("[Fetch and Cache Products]",r.success?"success":"error",r),r.success?(u=r.data?Object.keys(r.data).length:0)&&(e.text("Importing products..."),p(d,u),l(d)):r.data&&r.data.error&&g("error",r.data.error)}})},l=function t(r){o.ajax({type:"POST",url:drgc_admin_params.ajax_url,data:{action:"drgc_ajx_action",nonce:drgc_admin_params.ajax_nonce,step:"import_each_product",idx:r},success:function(r){m("[Import Each Product]",r.success?"success":"error",r),r.success?(_(++d,u),d<u?t(d):d===u&&setTimeout(function(){var r=new URLSearchParams(location.search);e.text("All products have been imported. Cleaning up..."),c.hide(),r.set("import_complete",!0),r.delete("post_status"),window.location.search=r.toString()},3e3)):r.data&&r.data.error&&g("error",r.data.error)}})},p=function(r,t){c.show(),s.text(t),_(r,t)},_=function(r,t){var e=100*(r/t).toFixed(2);a.css("width","".concat(e,"%")),i.text(r)},g=function(r,t){var e=0<arguments.length&&void 0!==r?r:"success",c=1<arguments.length?t:void 0;n.remove(),o('<div class="notice notice-'.concat(e,' is-dismissible products-import-notice"><p>').concat(c,"</p></div>")).insertBefore(".products-import-wrapper")},m=function(r,t,e){switch(t=t||"black"){case"success":t="Green";break;case"info":t="DodgerBlue";break;case"error":t="Red";break;case"warning":t="Orange";break;default:t=t}console.log("%c"+r,"color:"+t,e)};return{importCategories:function(){r.prop("disabled",!0),n.hide(),e.text("Fetching and importing categories...").show(),o.ajax({type:"POST",url:drgc_admin_params.ajax_url,data:{action:"drgc_ajx_action",nonce:drgc_admin_params.ajax_nonce,step:"import_categories"},success:function(r){m("[Import Categories]",r.success?"success":"error",r),r.success?(e.text("All categories have been imported. Fetching products..."),t()):r.data&&r.data.error&&g("error",r.data.error)}})},fetchAndCacheProducts:t,importEachProduct:l,initProgressBar:p,updateProgressBar:_,displayImportNotice:g,colorLog:m}}(jQuery);jQuery(document).ready(function(r){r("#products-import-btn").click(function(r){if(!drgc_admin_params.site_id||!drgc_admin_params.api_key)return alert("Please provide siteID & apiKey!");c.importCategories()})});jQuery(document).ready(function(e){e("#dr-sync-locales-btn").click(function(r){var t=e(r.target);t.addClass("sending"),e.ajax({type:"POST",url:drgc_admin_params.ajax_url,data:{action:"drgc_sync_locales",nonce:drgc_admin_params.ajax_nonce},success:function(){window.location.reload()},error:function(){t.removeClass("sending")}})})});var o;(o=jQuery)(function(){if(o("#drgc_drop_in_config").length){var r=wp.codeEditor.defaultSettings?_.clone(wp.codeEditor.defaultSettings):{};r.codemirror=_.extend({},r.codemirror,{indentUnit:2,tabSize:2}),wp.codeEditor.initialize(o("#drgc_drop_in_config"),r)}});var n=(jQuery,{convertToLocalHours:function(r){var t=new Date("2020-01-01 ".concat(r,":00:00 UTC")).getHours();return((t=0===t?12:12<t?t-12:t)<10?"0":"")+t},convertToUTCHours:function(r){var t=new Date("2020-01-01 ".concat(r,":00:00")).getUTCHours();return((t=0===t?12:12<t?t-12:t)<10?"0":"")+t}});jQuery(document).ready(function(e){var r=(e("#drgc_cron_utc_time").val()||"12:00").split(":"),c=r[0],o=r[1];e("#drgc_cron_handler").change(function(r){var t=e(r.target).is(":checked");e("#drgc_cron_schedule").toggle(t)}),e("#drgc_cron_local_hours").change(function(r){var t=e(r.target).val();c=n.convertToUTCHours(t),e("#drgc_cron_utc_time").val("".concat(c,":").concat(o)),e("#drgc_cron_utc_label").text("".concat(c,":").concat(o))}),e("#drgc_cron_local_minutes").change(function(r){o=e(r.target).val(),e("#drgc_cron_utc_time").val("".concat(c,":").concat(o)),e("#drgc_cron_utc_label").text("".concat(c,":").concat(o))}),e("#drgc_cron_local_hours").val(n.convertToLocalHours(c)),e("#drgc_cron_handler").trigger("change"),e(".visible-toggle").click(function(r){var t=e(r.target);t.hasClass("dashicons-hidden")?t.prev("input").attr("type","text"):t.prev("input").attr("type","password"),t.toggleClass("dashicons-hidden dashicons-visibility")})})}]);