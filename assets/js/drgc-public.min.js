"use strict";var FloatLabel=function(){function r(t){t.target.parentNode.classList.add("active")}function i(t){var e=t.target;e.value||e.parentNode.classList.remove("active")}return{init:function(){for(var t,e=document.querySelectorAll(".float-container"),a=0;a<e.length;a++){var n=e[a];n.querySelector("input").value&&n.classList.add("active"),t=void 0,(t=n.querySelector("input")).addEventListener("focus",r),t.addEventListener("blur",i)}}}}();function _typeof(t){return(_typeof="function"==typeof Symbol&&"symbol"==typeof Symbol.iterator?function(t){return typeof t}:function(t){return t&&"function"==typeof Symbol&&t.constructor===Symbol&&t!==Symbol.prototype?"symbol":typeof t})(t)}function _classCallCheck(t,e){if(!(t instanceof e))throw new TypeError("Cannot call a class as a function")}function _defineProperties(t,e){for(var a=0;a<e.length;a++){var n=e[a];n.enumerable=n.enumerable||!1,n.configurable=!0,"value"in n&&(n.writable=!0),Object.defineProperty(t,n.key,n)}}function _createClass(t,e,a){return e&&_defineProperties(t.prototype,e),a&&_defineProperties(t,a),t}jQuery(document).ready(function(i){if("function"!=typeof i().modal){var o=function(t,e){this.options=e,this.$element=i(t),this.$backdrop=this.isShown=null,this.options.remote&&this.$element.find(".modal-content").load(this.options.remote,i.proxy(function(){this.$element.trigger("loaded.bs.modal")},this))};o.DEFAULTS={backdrop:!0,keyboard:!0,show:!0},o.prototype.toggle=function(t){return this[this.isShown?"hide":"show"](t)},o.prototype.show=function(a){var n=this,t=i.Event("show.bs.modal",{relatedTarget:a});this.$element.trigger(t),this.isShown||t.isDefaultPrevented()||(this.isShown=!0,this.escape(),this.$element.on("click.dismiss.bs.modal",'[data-dismiss="modal"]',i.proxy(this.hide,this)),this.backdrop(function(){var t=i.support.transition&&n.$element.hasClass("fade");n.$element.parent().length||n.$element.appendTo(document.body),n.$element.show().scrollTop(0),t&&n.$element[0].offsetWidth,n.$element.addClass("in").attr("aria-hidden",!1),n.enforceFocus();var e=i.Event("shown.bs.modal",{relatedTarget:a});t?n.$element.find(".modal-dialog").one(i.support.transition.end,function(){n.$element.focus().trigger(e)}).emulateTransitionEnd(300):n.$element.focus().trigger(e)}))},o.prototype.hide=function(t){t&&t.preventDefault(),t=i.Event("hide.bs.modal"),this.$element.trigger(t),this.isShown&&!t.isDefaultPrevented()&&(this.isShown=!1,this.escape(),i(document).off("focusin.bs.modal"),this.$element.removeClass("in").attr("aria-hidden",!0).off("click.dismiss.bs.modal"),i.support.transition&&this.$element.hasClass("fade")?this.$element.one(i.support.transition.end,i.proxy(this.hideModal,this)).emulateTransitionEnd(300):this.hideModal())},o.prototype.enforceFocus=function(){i(document).off("focusin.bs.modal").on("focusin.bs.modal",i.proxy(function(t){this.$element[0]===t.target||this.$element.has(t.target).length||this.$element.focus()},this))},o.prototype.escape=function(){this.isShown&&this.options.keyboard?this.$element.on("keyup.dismiss.bs.modal",i.proxy(function(t){27===t.which&&this.hide()},this)):this.isShown||this.$element.off("keyup.dismiss.bs.modal")},o.prototype.hideModal=function(){var t=this;this.$element.hide(),this.backdrop(function(){t.removeBackdrop(),t.$element.trigger("hidden.bs.modal")})},o.prototype.removeBackdrop=function(){this.$backdrop&&this.$backdrop.remove(),this.$backdrop=null},o.prototype.backdrop=function(t){var e=this.$element.hasClass("fade")?"fade":"";if(this.isShown&&this.options.backdrop){var a=i.support.transition&&e;if(this.$backdrop=i('<div class="modal-backdrop '+e+'" />').appendTo(document.body),this.$element.on("click.dismiss.bs.modal",i.proxy(function(t){t.target===t.currentTarget&&("static"===this.options.backdrop?this.$element[0].focus.call(this.$element[0]):this.hide.call(this))},this)),a&&this.$backdrop[0].offsetWidth,this.$backdrop.addClass("in"),!t)return;a?this.$backdrop.one(i.support.transition.end,t).emulateTransitionEnd(150):t()}else!this.isShown&&this.$backdrop?(this.$backdrop.removeClass("in"),i.support.transition&&this.$element.hasClass("fade")?this.$backdrop.one(i.support.transition.end,t).emulateTransitionEnd(150):t()):t&&t()};var t=i.fn.modal;i.fn.modal=function(n,r){return this.each(function(){var t=i(this),e=t.data("bs.modal"),a=i.extend({},o.DEFAULTS,t.data(),"object"===_typeof(n)&&n);e||t.data("bs.modal",e=new o(this,a)),"string"==typeof n?e[n](r):a.show&&e.show(r)})},i.fn.modal.Constructor=o,i.fn.modal.noConflict=function(){return i.fn.modal=t,this},i(document).on("click.bs.modal.data-api",'[data-toggle="modal"]',function(t){var e=i(this),a=e.attr("href"),n=i(e.attr("data-target")||a&&a.replace(/.*(?=#[^\s]+$)/,"")),r=n.data("bs.modal")?"toggle":i.extend({remote:!/#/.test(a)&&a},n.data(),e.data());e.is("a")&&t.preventDefault(),n.modal(r,this).one("hide",function(){e.is(":visible")&&e.focus()})}),i(document).on("body",".modal",function(){i(document.body).addClass("modal-open")}).on("body",".modal",function(){i(document.body).removeClass("modal-open")})}}),jQuery(document).ready(function(d){var e,a,n,l="https://"+drgc_params.domain+"/v1/shoppers",c=d("#dr-cart-page-wrapper div.product-sku span:first-child").html();function p(){d.ajax({type:"GET",headers:{Accept:"application/json",Authorization:"Bearer ".concat(drgc_params.accessToken)},url:"".concat(l,"/me/carts/active?expand=all"),success:function(t){!function(t){d("#tempCartProducts").remove(),d("<div id='tempCartProducts' style='display:none;'></div>").appendTo("body"),t.cart.lineItems.lineItem?function(e,a){var s=0;d.each(e.cart.lineItems.lineItem,function(n,r){"PHYSICAL"==r.product.productType&&(a=!0);var t=r.product.id;r.product.parentProduct&&(t=r.product.parentProduct.id);var i=r.pricing.formattedSalePriceWithQuantity,o=r.pricing.formattedListPriceWithQuantity;(function(t){return new Promise(function(e,a){d.ajax({type:"POST",url:drgc_params.ajaxUrl,data:{action:"get_permalink",productID:t},success:function(t){e(t)},error:function(t){a(t)}})})})(t).then(function(t){var e=t,a='\n          <div data-line-item-id="'.concat(r.id,'" class="dr-product dr-product-lineitem" data-product-id="').concat(r.product.id,'" data-sort="').concat(n,'">\n            <div class="dr-product-content">\n                <div class="dr-product__img" style="background-image: url(').concat(r.product.thumbnailImage,')"></div>\n                <div class="dr-product__info">\n                    <a class="product-name" href="').concat(e,'">').concat(r.product.displayName,'</a>\n                    <div class="product-sku">\n                        <span>').concat(c," </span>\n                        <span>#").concat(r.product.id,'</span>\n                    </div>\n                    <div class="product-qty">\n                        <span class="qty-text">Qty ').concat(r.quantity,'</span>\n                        <span class="dr-pd-cart-qty-minus value-button-decrease ').concat(r.quantity<=1?"disabled":"",'"></span>\n                        <input type="number" class="product-qty-number" step="1" min="').concat(1,'" max="').concat(999,'" value="').concat(r.quantity,'" maxlength="5" size="2" pattern="[0-9]*" inputmode="numeric" readonly="true">\n                        <span class="dr-pd-cart-qty-plus value-button-increase ').concat(999<=r.quantity?"disabled":"",'"></span>\n                    </div>\n                </div>\n            </div>\n            <div class="dr-product__price">\n                <button class="dr-prd-del remove-icon"></button>\n                <span class="sale-price">').concat(i,'</span>\n                <span class="regular-price ').concat(i===o?"d-none":"",'">').concat(o,"</span>\n            </div>\n          </div>\n          ");d("#tempCartProducts").append(a)}).then(function(){++s===e.cart.lineItems.lineItem.length&&(function(t,e){var a=t.cart.pricing;e?d(".dr-summary__shipping").show():d(".dr-summary__shipping").hide();d("div.dr-summary__shipping .shipping-value").text(a.formattedShippingAndHandling),0===a.shippingAndHandling.value&&d("div.dr-summary__shipping .shipping-value").text(drgc_params.translations.free_label);d("div.dr-summary__discount .discount-value").text("-".concat(a.formattedDiscount)),d("div.dr-summary__discounted-subtotal .discounted-subtotal-value").text(a.formattedSubtotalWithDiscount),a.discount.value?d(".dr-summary__discount").show():d(".dr-summary__discount").hide()}(e,a),function(t){var e=d("#tempCartProducts");e.find(".dr-product-lineitem").sort(function(t,e){return+t.dataset.sort-+e.dataset.sort}).appendTo(e),d.ajax({type:"GET",headers:{"Content-Type":"application/json",Authorization:"Bearer ".concat(drgc_params.accessToken)},url:"".concat(l,"/me/point-of-promotions/Banner_ShoppingCartLocal/offers?format=json&expand=all"),success:function(t,e,a){d.each(t.offers.offer,function(t,e){var a='\n            <div class="dr-banner">\n              <div class="dr-banner__content">'.concat(e.salesPitch[0],'</div>\n              <div class="dr-banner__img"><img src="').concat(e.image,'"></div>\n            </div>\n            ');d("#tempCartProducts").append(a),d(".dr-cart__products").html(d("#tempCartProducts").html())})},error:function(t){reject(t)}}),d("body").css({"pointer-events":"auto",opacity:1}),d.each(t.cart.lineItems.lineItem,function(t,e){!function(s){d.ajax({type:"GET",headers:{"Content-Type":"application/json",Authorization:"Bearer ".concat(drgc_params.accessToken)},url:"".concat(l,"/me/products/").concat(s,"/point-of-promotions/CandyRack_ShoppingCart/offers?format=json&expand=all"),success:function(t,e,a){d.each(t.offers.offer,function(t,e){var i=0<e.salesPitch[0].length?e.salesPitch[0]:"",o="Up-sell"==e.type?drgc_params.translations.upgrade_label:drgc_params.translations.add_label;d.each(e.productOffers.productOffer,function(t,e){var a=e.pricing.formattedSalePriceWithQuantity,n=e.pricing.formattedListPriceWithQuantity,r='\n              <div  class="dr-product dr-candyRackProduct" data-product-id="'.concat(e.product.id,'" data-parent-product-id="').concat(s,'">\n                <div class="dr-product-content">\n                    <img src="').concat(e.product.thumbnailImage,'" class="dr-candyRackProduct__img"/>\n                    <div class="dr-product__info">\n                      <div class="product-color">\n                        <span style="background-color: yellow;">').concat(i,"</span>\n                      </div>\n                      ").concat(e.product.displayName,'\n                      <div class="product-sku">\n                        <span>').concat(c,"  </span>\n                        <span>#").concat(e.product.id,'</span>\n                      </div>\n                    </div>\n                </div>\n                <div class="dr-product__price">\n                    <button type="button" class="dr-btn dr-buy-candyRack" data-buy-uri="').concat(e.addProductToCart.uri,'">').concat(o,'</button>\n                    <span class="sale-price">').concat(a,'</span>\n                    <span class="regular-price dr-strike-price ').concat(a===n?"d-none":"",'">').concat(n,"</span>\n                </div>\n              </div>\n              ");0==d('div.dr-product[data-product-id="'+e.product.id+'"]:not(.dr-candyRackProduct)').length&&d('div[data-product-id="'+s+'"]').after(r)})})},error:function(t){reject(t)}})}(e.product.id),function(n){d.ajax({type:"GET",headers:{"Content-Type":"application/json",Authorization:"Bearer ".concat(drgc_params.accessToken)},url:"".concat(l,"/me/products/").concat(n,"/offers?format=json&expand=all"),success:function(t,e,a){d.each(t.offers.offer,function(t,e){"Bundling"==e.type&&"Tight Bundle Policy"==e.policyName&&d.each(e.productOffers.productOffer,function(t,e){e.product.id!=n&&d('div.dr-product[data-product-id="'+e.product.id+'"]').find(".remove-icon,.value-button-increase,.value-button-decrease").remove()})})},error:function(t){reject(t)}})}(e.product.id)})}(e))}).catch(function(t){if(t.responseJSON.errors){var e=t.responseJSON.errors.error.map(function(t){return t.description});console.log(e)}})})}(t,!1):(d(".dr-cart__products").text(drgc_params.translations.empty_cart_msg),d("#cart-estimate").hide())}(t)},error:function(t){console.log(t)}})}d("body").on("click",".dr-prd-del",function(t){t.preventDefault();var n=d(t.target).closest(".dr-product").data("line-item-id");d.ajax({type:"DELETE",headers:{Accept:"application/json","Content-Type":"application/json",Authorization:"Bearer ".concat(drgc_params.accessToken)},url:"".concat(l,"/me/carts/active/line-items/").concat(n),success:function(t,e,a){204===a.status&&(d('.dr-product[data-line-item-id="'.concat(n,'"]')).remove(),p())},error:function(t){console.log(t)}})}),d("body").on("click","span.dr-pd-cart-qty-plus, span.dr-pd-cart-qty-minus",(e=function(t){var e=d(t.target),o=e.closest(".dr-product").data("line-item-id"),a=e.siblings(".product-qty-number:first"),n=parseInt(a.val(),10),r=parseInt(a.attr("max"),10),i=parseInt(a.attr("min"),10),s=parseInt(a.attr("step"),10);a.val();if(e.hasClass("disabled"))return;n?d(t.currentTarget).is(".dr-pd-cart-qty-plus")?r&&r<=n?a.val(r):a.val(n+s):d(t.currentTarget).is(".dr-pd-cart-qty-minus")&&(i&&n<=i?a.val(i):1<n&&a.val(n-s)):a.val("1");var c={action:"update",quantity:a.val(),expand:"all",fields:null};d.ajax({type:"POST",headers:{Accept:"application/json","Content-Type":"application/json",Authorization:"Bearer ".concat(drgc_params.accessToken)},url:"".concat(l,"/me/carts/active/line-items/").concat(o,"?").concat(d.param(c)),success:function(t,e,a){if(200===a.status){var n=t.lineItem.pricing,r=n.formattedListPriceWithQuantity,i=n.formattedSalePriceWithQuantity;d("span#".concat(o,".sale-price")).text(i),d("span#".concat(o,".regular-price")).text(r),p()}},error:function(t){console.log(t)}})},a=200,function(){var t=arguments;n||(e.apply(this,t),n=!0,setTimeout(function(){return n=!1},a))})),d(document).ajaxSend(function(){0<d(".dr-cart__products").length&&d("body").css({"pointer-events":"none",opacity:.5})}),d(document).ajaxStop(function(){0<d(".dr-cart__products").length&&d("body").css({"pointer-events":"auto",opacity:1})}),d("body").on("click",".dr-buy-candyRack",function(t){t.preventDefault();var e,a=d(t.target).attr("data-buy-uri");d.ajax({type:"POST",headers:{Accept:"application/json","Content-Type":"application/json",Authorization:"Bearer ".concat(drgc_params.accessToken)},url:(e=a,"true"==drgc_params.testOrder&&(e+="&testOrder=true"),e),success:function(t,e,a){p()},error:function(t){console.log(t)}})}),d("body").on("change",".dr-currency-select",function(t){t.preventDefault();var e={currency:t.target.value,locale:d(this).find("option:selected").attr("data-locale")};d.ajax({type:"POST",headers:{Accept:"application/json","Content-Type":"application/json",Authorization:"Bearer ".concat(drgc_params.accessToken)},url:"".concat(l,"/me?currency=").concat(e.currency,"&locale=").concat(e.locale),success:function(t,e,a){204===a.status&&location.reload(!0)},error:function(t){reject(t)}})}),d(".promo-code-toggle").click(function(){d(".promo-code-wrapper").toggle()}),d("#apply-promo-code-btn").click(function(a){var t=d("#promo-code").val();d.trim(t)?(d(a.target).addClass("sending").blur(),function(t,e){var a=0<arguments.length&&void 0!==t?t:{},n=1<arguments.length&&void 0!==e?e:{},r=d.param(a);return new Promise(function(e,a){d.ajax({type:"POST",headers:{Accept:"application/json","Content-Type":"application/json",Authorization:"Bearer ".concat(drgc_params.accessToken)},url:"".concat(l,"/me/carts/active?&").concat(r),data:JSON.stringify({cart:n}),success:function(t){e(t)},error:function(t){a(t)}})})}({promoCode:t}).then(function(){d(a.target).removeClass("sending"),d("#dr-promo-code-err-field").text("").hide(),p()}).catch(function(t){if(d(a.target).removeClass("sending"),t.responseJSON.errors){var e=t.responseJSON.errors.error.map(function(t){return t.description});d("#dr-promo-code-err-field").html(e.join("<br/>")).show()}})):d("#dr-promo-code-err-field").text(drgc_params.translations.invalid_promo_code_msg).show()}),d("#promo-code").keypress(function(t){13==t.which&&(t.preventDefault(),d("#apply-promo-code-btn").trigger("click"))}),0<d("#dr-cart-page-wrapper").length&&p()}),jQuery(document).ready(function(s){if(s("#checkout-payment-form").length){var o=function(t){return{address:{nickName:s("#"+t+"-field-address1").val(),firstName:s("#"+t+"-field-first-name").val(),lastName:s("#"+t+"-field-last-name").val(),line1:s("#"+t+"-field-address1").val(),line2:s("#"+t+"-field-address2").val(),city:s("#"+t+"-field-city").val(),countrySubdivision:s("#"+t+"-field-state").val(),postalCode:s("#"+t+"-field-zip").val(),countryName:s("#"+t+"-field-country :selected").text(),country:s("#"+t+"-field-country :selected").val(),phoneNumber:s("#"+t+"-field-phone").val()}}},c=function(t){s.ajax({type:"POST",headers:{"Content-Type":"application/json",Authorization:"Bearer ".concat(drgc_params.accessToken)},data:t,url:"".concat(v,"/me/addresses"),success:function(){console.log("address update success.")},error:function(t){console.log(t)}})},d=function(t){var n="checkout-shipping-form"===t.attr("id")?"shipping":"billing";t.addClass("was-validated"),t.find(".dr-err-field").hide();for(var e=document.querySelectorAll("[name^=".concat(n,"-]")),a=0,r=e.length;a<r;a++)if(s(e[a]).is(":visible")&&!1===e[a].checkValidity())return!1;return s.each(t.serializeArray(),function(t,e){var a=e.name.split("-")[1];b[n][a]=e.value}),b[n].emailAddress=y,"US"!==b[n].country&&(b[n].countrySubdivision=""),!0},l=function(t,e){var a=0<arguments.length&&void 0!==t?t:{},n=1<arguments.length&&void 0!==e?e:{},r=s.param(a);return new Promise(function(e,a){s.ajax({type:"POST",headers:{Accept:"application/json","Content-Type":"application/json",Authorization:"Bearer ".concat(drgc_params.accessToken)},url:"".concat(v,"/me/carts/active?").concat(r),data:JSON.stringify({cart:n})}).done(function(t){e(t)}).fail(function(t){a(t)})})},p=function(t,e){var a=["".concat(t.firstName," ").concat(t.lastName),t.line1,t.city,t.country];e.text(a.join(", "))},u=function(t,e){409===t.status?("restricted-bill-to-country"===t.responseJSON.errors.error[0].code&&e.text(drgc_params.translations.address_error_msg).show(),"restricted-ship-to-country"===t.responseJSON.errors.error[0].code&&e.text(drgc_params.translations.address_error_msg).show()):e.text(t.responseJSON.errors.error[0].description).show()},m=function(t){t.prev();var e=t.next();s(".dr-checkout__el").index(t)>C&&(C=s(".dr-checkout__el").index(t)),t.removeClass("active").addClass("closed"),e.addClass("active").removeClass("closed"),e.hasClass("small-closed-left")&&(e.removeClass("small-closed-left"),e.next().removeClass("small-closed-right")),i(t),h(),s("html, body").animate({scrollTop:e.first().offset().top-80},500)},f=function(t){var e=t.pricing,a=e.formattedOrderTotal,n=e.formattedTax;if(0<Object.keys(t.shippingMethod).length){var r=0===t.pricing.shippingAndHandling.value?drgc_params.translations.free_label:t.pricing.formattedShippingAndHandling;s("div.dr-summary__shipping > .item-value").text(r)}s("div.dr-summary__tax > .item-value").text(n),s("div.dr-summary__total > .total-value").text(a)},i=function(t){var e=s(".dr-checkout__shipping"),a=s(".dr-checkout__billing"),n=s(".dr-checkout__payment"),r=s(".dr-checkout__confirmation");e.is(":visible")&&e.hasClass("closed")&&a.hasClass("closed")?(e.addClass("small-closed-left"),a.addClass("small-closed-right")):(e.removeClass("small-closed-left"),a.removeClass("small-closed-right")),t&&t.hasClass("dr-checkout__payment")?(n.addClass("small-closed-left"),r.addClass("small-closed-right").removeClass("d-none")):(n.removeClass("small-closed-left"),r.removeClass("small-closed-right").addClass("d-none"))},h=function(){s(".dr-checkout__el.active").hasClass("dr-checkout__payment")||s(".dr-checkout__el.active").hasClass("dr-checkout__confirmation")?s(".dr-summary__tax > .item-label").text(drgc_params.translations.tax_label):s(".dr-summary__tax > .item-label").text(drgc_params.translations.estimated_tax_label)},e=function(t){var e={expand:"all",shippingOptionId:t};s.ajax({type:"POST",headers:{"Content-Type":"application/json",Accept:"application/json",Authorization:"Bearer ".concat(drgc_params.accessToken)},url:"".concat(v,"/me/carts/active/apply-shipping-option?").concat(s.param(e)),success:function(t){f(t.cart)},error:function(t){console.log(t)}})},a=function(t){if(t){var e={paymentMethod:{sourceId:t}};s.ajax({type:"POST",headers:{Accept:"application/json","Content-Type":"application/json",Authorization:"Bearer ".concat(drgc_params.accessToken)},url:"".concat(v,"/me/carts/active/apply-payment-method?expand=all"),data:JSON.stringify(e),success:function(){n()},error:function(t){s("form#checkout-confirmation-form").find('button[type="submit"]').removeClass("sending").blur(),s("#dr-checkout-err-field").text(t.responseJSON.errors.error[0].description).show(),s("body").css({"pointer-events":"auto",opacity:1})}})}},n=function(){s.ajax({type:"POST",headers:{Accept:"application/json","Content-Type":"application/json",Authorization:"Bearer ".concat(drgc_params.accessToken)},url:"".concat(v,"/me/carts/active/submit-cart?expand=all"),success:function(t){s('#checkout-confirmation-form input[name="order_id"]').val(t.submitCart.order.id),s("#checkout-confirmation-form").submit()},error:function(t){s("form#checkout-confirmation-form").find('button[type="submit"]').removeClass("sending").blur(),s("#dr-checkout-err-field").text(t.responseJSON.errors.error[0].description).show(),s("body").css({"pointer-events":"auto",opacity:1})}})},t=drgc_params.domain,g=drgc_params.isLogin,v="https://"+t+"/v1/shoppers",r=drgc_params.drLocale||"en_US";FloatLabel.init();var y,_=new DigitalRiver(drgc_params.digitalRiverKey),b={shipping:{},billing:{}},k={},x=null,C=-1;if(s(".credit-card-section").length){var w=function(t){var e=document.createElement("div");e.setAttribute("id","tempDiv"+t),e.className=t,document.body.appendChild(e);var a=document.getElementById("tempDiv"+t),n=window.getComputedStyle(a),r={color:n.color,fontFamily:n.fontFamily.replace(new RegExp('"',"g"),""),fontSize:n.fontSize,height:n.height};return document.body.removeChild(a),r},S=function(t,e){t.error?e.text(t.error.message).show():e.text("").hide()},T={classes:{base:"DRElement",complete:"DRElement--complete",empty:"DRElement--empty",invalid:"DRElement--invalid"},style:{base:w("DRElement"),complete:w("DRElement--complete"),empty:w("DRElement--empty"),invalid:w("DRElement--invalid")}},j=_.createElement("cardnumber",T),P=_.createElement("cardexpiration",Object.assign({},T,{placeholderText:"MM/YY"})),A=_.createElement("cardcvv",Object.assign({},T,{placeholderText:"CVV"}));j.mount("card-number"),P.mount("card-expiration"),A.mount("card-cvv"),j.on("change",function(t){!function(t){s(".cards .active").removeClass("active"),t.brand&&"unknown"!==t.brand&&s(".cards .".concat(t.brand,"-icon")).addClass("active")}(t),S(t,s("#card-number-error"))}),P.on("change",function(t){S(t,s("#card-expiration-error"))}),A.on("change",function(t){S(t,s("#card-cvv-error"))})}s("#checkout-email-form").on("submit",function(t){if(t.preventDefault(),drgc_params.cart.cart.lineItems.hasOwnProperty("lineItem")){var e=s("#checkout-email-form"),a=e.find("input[name=email]").val().trim();if(e.addClass("was-validated"),!1===e[0].checkValidity())return!1;y=a;var n=s(".dr-checkout__email");n.find(".dr-panel-result__text").text(y),m(n)}}),s("input[name=email]").val()&&s("#checkout-email-form").length&&s("#checkout-email-form").submit(),s("#checkout-shipping-form").on("submit",function(t){t.preventDefault();var e=s(t.target),a=e.find('button[type="submit"]');d(e)&&(a.addClass("sending").blur(),l({expand:"all"},{shippingAddress:b.shipping}).then(function(t){"true"==g&&function(){var t=o("shipping");t.address.isDefault=!0,c(JSON.stringify(t))}(),a.removeClass("sending").blur(),function(t){var n=0===t.pricing.shippingAndHandling.value,e=t.shippingMethod.code;s.each(t.shippingOptions.shippingOption,function(t,e){if(!s("#shipping-option-"+e.id).length){var a='\n                    <div class="field-radio">\n                        <input type="radio"\n                            name="selector"\n                            id="shipping-option-'.concat(e.id,'"\n                            data-cost="').concat(e.formattedCost,'"\n                            data-id="').concat(e.id,'"\n                            data-desc="').concat(e.description,'"\n                            >\n                        <label for="shipping-option-').concat(e.id,'">\n                            <span>\n                                ').concat(e.description,'\n                            </span>\n                            <span class="black">\n                                ').concat(n?drgc_params.translations.free_label:e.formattedCost,"\n                            </span>\n                        </label>\n                    </div>\n                ");s("form#checkout-delivery-form .dr-panel-edit__el").append(a)}}),s("form#checkout-delivery-form").children().find('input:radio[data-id="'+e+'"]').prop("checked",!0)}(t.cart);var e=s(".dr-checkout__shipping");p(t.cart.shippingAddress,e.find(".dr-panel-result__text")),m(e),f(t.cart)}).catch(function(t){a.removeClass("sending").blur(),u(t,e.find(".dr-err-field"))}))}),s("#checkout-billing-form").on("submit",function(t){t.preventDefault();var e=s(t.target),a=e.find('button[type="submit"]'),n=s('[name="checkbox-billing"]').is(":visible:checked"),r=d(e),i=!!s(".dr-checkout__shipping").length;r&&(n&&(b.billing=Object.assign({},b.shipping)),a.addClass("sending").blur(),l({expand:"all"},{billingAddress:b.billing}).then(function(t){"true"==g&&((!i||n)&&i||function(){var t=o("billing");t.address.isDefault=!1,c(JSON.stringify(t))}()),a.removeClass("sending").blur();var e=s(".dr-checkout__billing");p(t.cart.billingAddress,e.find(".dr-panel-result__text")),m(e),f(t.cart)}).catch(function(t){a.removeClass("sending").blur(),u(t,e.find(".dr-err-field"))}))}),s("form#checkout-delivery-form").on("submit",function(t){t.preventDefault();var r=s(this).children().find("input:radio:checked").first(),i=s(this).find('button[type="submit"]').toggleClass("sending").blur(),e={expand:"all",shippingOptionId:r.data("id")};s.ajax({type:"POST",headers:{Accept:"application/json","Content-Type":"application/json",Authorization:"Bearer ".concat(drgc_params.accessToken)},url:"".concat(v,"/me/carts/active/apply-shipping-option?").concat(s.param(e)),success:function(t){i.removeClass("sending").blur();var e=s(".dr-checkout__delivery"),a=0===t.cart.pricing.shippingAndHandling.value,n="".concat(r.data("desc")," ").concat(a?drgc_params.translations.free_label:r.data("cost"));e.find(".dr-panel-result__text").text(n),m(e),f(t.cart)},error:function(t){console.log(t)}})}),s("form#checkout-delivery-form").on("change",'input[type="radio"]',function(){!function(){var t=s("form#checkout-delivery-form").children().find("input:radio:checked").first().data("id");e(t)}()}),s("form#checkout-payment-form").on("submit",function(t){t.preventDefault();var e=s("form#checkout-payment-form"),a=e.find('button[type="submit"]');if(e.addClass("was-validated"),!1===e[0].checkValidity())return!1;var n=s(this).serializeArray();k={},s(n).each(function(t,e){k[e.name]=e.value}),s("#dr-payment-failed-msg, #dr-checkout-err-field").text("").hide();var r=s(".dr-checkout__payment");if("credit-card"===k.selector){var i=drgc_params.cart.cart,o={type:"creditCard",owner:{firstName:b.billing.firstName,lastName:b.billing.lastName,email:b.billing.emailAddress,address:{line1:b.billing.line1,city:b.billing.city,state:b.billing.countrySubdivision,country:b.billing.country,postalCode:b.billing.postalCode}},amount:i.pricing.orderTotal.value,currency:i.pricing.orderTotal.currency};a.addClass("sending").blur(),_.createSource(j,o).then(function(t){a.removeClass("sending").blur(),t.error?("failed"===t.error.state&&s("#dr-payment-failed-msg").text(drgc_params.translations.credit_card_error_msg).show(),t.error.errors&&s("#dr-payment-failed-msg").text(t.error.errors[0].message).show()):"chargeable"===t.source.state&&(x=t.source.id,r.find(".dr-panel-result__text").text("".concat(drgc_params.translations.credit_card_ending_label," ").concat(t.source.creditCard.lastFourDigits)),m(r))})}}),s('#checkout-confirmation-form button[type="submit"]').on("click",function(t){t.preventDefault(),s(t.target).toggleClass("sending").blur(),s("#dr-payment-failed-msg").hide(),a(x)}),drgc_params.payPal.sourceId&&(s(".dr-checkout").children().addClass("closed"),s(".dr-checkout").children().removeClass("active"),s(".dr-checkout__payment").removeClass("closed").addClass("active"),drgc_params.payPal.failure,"true"==drgc_params.payPal.success&&a(drgc_params.payPal.sourceId)),s('[name="checkbox-billing"]').on("click",function(t){s(this).is(":checked")?s(".billing-section").css("display","none"):s(".billing-section").css("display","block")}),s(".dr-accordion__edit").on("click",function(t){t.preventDefault();var e=s(t.target).parent().parent(),a=e.siblings().andSelf(),n=a.eq(C).prevAll().andSelf(),r=a.filter(s(".active"));e.next(),e.prev();a.index(e)>a.index(r)||(n.addClass("closed"),r.removeClass("active"),e.removeClass("closed").addClass("active"),i(),h())}),s("#radio-credit-card").is(":checked")&&s(".credit-card-info").show(),s('input:radio[name="selector"]').on("change",function(){switch(s(this).val()){case"credit-card":s("#dr-paypal-button").hide(),s(".credit-card-info").show(),s("#dr-submit-payment").text(drgc_params.translations.pay_with_card_label.toUpperCase()).show();break;case"paypal":s("#dr-submit-payment").hide(),s(".credit-card-info").hide(),s("#dr-paypal-button").show(),s("#dr-submit-payment").text(drgc_params.translations.pay_with_paypal_label.toUpperCase())}}),s("#shipping-field-country").on("change",function(){"US"===this.value?s("#shipping-field-state").parent(".form-group").removeClass("d-none"):s("#shipping-field-state").parent(".form-group").addClass("d-none")}),s("#billing-field-country").on("change",function(){"US"===this.value?s("#billing-field-state").parent(".form-group").removeClass("d-none"):s("#billing-field-state").parent(".form-group").addClass("d-none")}),s("#dr-paypal-button").length&&(s("#checkout-payment-form").removeClass("dr-panel-edit").css("visibility","hidden"),paypal.Button.render({env:-1===t.indexOf("test")?"production":"sandbox",locale:r,style:{label:"checkout",size:"responsive",height:40,color:"gold",shape:"rect",layout:"horizontal",fundingicons:"false",tagline:"false"},onEnter:function(){s("#checkout-payment-form").addClass("dr-panel-edit").css("visibility","visible"),s("#dr-paypal-button").hide()},payment:function(){var t=drgc_params.cart.cart,e=!!s(".dr-checkout__shipping").length,a=[];s.each(t.lineItems.lineItem,function(t,e){a.push({name:e.product.name,quantity:e.quantity,unitAmount:e.pricing.listPrice.value})});var n={type:"payPal",amount:t.pricing.orderTotal.value,currency:"USD",payPal:{returnUrl:window.location.href+"?ppsuccess=true",cancelUrl:window.location.href+"?ppcancel=true",items:a,taxAmount:t.pricing.tax.value,requestShipping:e}};return e&&(n.shipping={recipient:"".concat(t.shippingAddress.firstName," ").concat(t.shippingAddress.lastName," "),phoneNumber:t.shippingAddress.phoneNumber,address:{line1:t.shippingAddress.line1,line2:t.shippingAddress.line2,city:t.shippingAddress.city,state:t.shippingAddress.countrySubdivision,country:t.shippingAddress.country,postalCode:t.shippingAddress.postalCode}}),_.createSource(n).then(function(t){if(!t.error)return sessionStorage.setItem("paymentSourceId",t.source.id),t.source.payPal.token;s("#dr-payment-failed-msg").text(t.error.errors[0].message).show()})},onAuthorize:function(){var t=sessionStorage.getItem("paymentSourceId");s("body").css({"pointer-events":"none",opacity:.5}),a(t)}},"#dr-paypal-button"))}}),function(t){t.URLSearchParams=t.URLSearchParams||function(t){var a=this;a.searchString=t,a.get=function(t){var e=new RegExp("[?&]"+t+"=([^&#]*)").exec(a.searchString);return null==e?null:decodeURI(e[1])||0}}}(window),window.onpageshow=function(t){(t.persisted||window.performance&&2===window.performance.navigation.type)&&window.location.reload()},jQuery(document).ready(function(a){a("input[type=text]:required").on("input",function(t){var e=t.target;e.setCustomValidity(e.value&&!a.trim(e.value)?drgc_params.translations.required_field_msg:""),e.validity.valueMissing?a(e).next(".invalid-feedback").text(drgc_params.translations.required_field_msg):e.validity.customError&&a(e).next(".invalid-feedback").text(e.validationMessage)})}),jQuery(document).ready(function(o){var s=drgc_params.ajaxUrl;o("#dr_login_form").on("submit",function(t){t.preventDefault();var e=o("#dr_login_form");if(e.addClass("was-validated"),e.data("processing"))return!1;if(!1===e[0].checkValidity())return!1;var a=e.find('[type="submit"]').toggleClass("sending").blur();e.data("processing",!0),o(".dr-form-error-msg").text("");var n={action:"drgc_login",nonce:drgc_params.ajaxNonce,username:o(".dr-login-form input[name=username]").val(),password:o(".dr-login-form input[name=password]").val()};o.post(s,n,function(t){t.success?location.reload():(e.data("processing",!1),a.removeClass("sending").blur(),t.data.hasOwnProperty("error_description")&&o(".dr-form-error-msg").text(t.data.error_description),"[object String]"==Object.prototype.toString.call(t.data)&&o(".dr-form-error-msg").text(t.data),o(".dr-form-error-msg").css("color","red"))})}),o(".drgc-wrapper").on("click",".dr-logout",function(t){if(t.preventDefault(),!o(this).data("processing")){o(this).toggleClass("sending").blur();o(this).data("processing",!0);var e={action:"drgc_logout",nonce:drgc_params.ajaxNonce};o.post(s,e,function(t){location.reload()})}}),o("#dr_login_form, #dr-signup-form, #dr-pass-reset-form, #checkout-email-form").find("input[type=email]").on("input",function(t){var e=t.target;e.validity.valueMissing?o(e).next(".invalid-feedback").text(drgc_params.translations.required_field_msg):e.validity.typeMismatch&&o(e).next(".invalid-feedback").text(drgc_params.translations.invalid_email_msg)}),o("#dr-signup-form input[name=upw], #dr-confirm-password-reset-form input[name=password]").on("input",function(t){var e,a=t.target,n=[];(a.value.length<8||32<a.value.length)&&n.push(drgc_params.translations.password_length_error_msg),/[A-Z]/.test(a.value)||n.push(drgc_params.translations.password_uppercase_error_msg),/[a-z]/.test(a.value)||n.push(drgc_params.translations.password_lowercase_error_msg),/[0-9]/.test(a.value)||n.push(drgc_params.translations.password_number_error_msg),/[!_@]/.test(a.value)||n.push(drgc_params.translations.password_char_error_msg),/^[a-zA-Z0-9!_@]+$/.test(a.value)||n.push(drgc_params.translations.password_banned_char_error_msg),e=n.join(" "),a.setCustomValidity(e),a.validity.valueMissing?o(a).next(".invalid-feedback").text(drgc_params.translations.required_field_msg):a.validity.customError&&o(a).next(".invalid-feedback").text(a.validationMessage)}),o("#dr-signup-form input[type=password], #dr-confirm-password-reset-form input[type=password]").on("input",function(t){var e=o(t.target).closest("form"),a=e.find("input[type=password]")[0],n=e.find("input[type=password]")[1];n.setCustomValidity(a.value!==n.value?drgc_params.translations.password_confirm_error_msg:""),n.validity.valueMissing?o(n).next(".invalid-feedback").text(drgc_params.translations.required_field_msg):n.validity.customError&&o(n).next(".invalid-feedback").text(n.validationMessage)}),o(".dr-signup-form").on("submit",function(t){t.preventDefault();var e=o(t.target);if(e.addClass("was-validated"),e.data("processing"))return!1;if(!1===e[0].checkValidity())return!1;var a=e.find("button[type=submit]").toggleClass("sending").blur();e.data("processing",!0),o(".dr-signin-form-error").text("");var n={action:"drgc_signup",nonce:drgc_params.ajaxNonce,first_name:o(".dr-signup-form input[name=first_name]").val(),last_name:o(".dr-signup-form input[name=last_name]").val(),username:o(".dr-signup-form input[name=uemail]").val(),password:o(".dr-signup-form input[name=upw]").val(),confirm_password:o(".dr-signup-form input[name=upw2]").val()};o.post(s,n,function(t){t.success?location.reload():(e.data("processing",!1),a.removeClass("sending").blur(),t.data&&t.data.errors&&t.data.errors.error[0].hasOwnProperty("description")?o(".dr-signin-form-error").text(t.data.errors.error[0].description):"[object String]"==Object.prototype.toString.call(t.data)?o(".dr-signin-form-error").text(t.data):o(".dr-signin-form-error").text(drgc_params.translations.undefined_error_msg),o(".dr-signin-form-error").css("color","red"))})}),o("#dr-pass-reset-form").on("submit",function(t){t.preventDefault();var e=o(t.target),a=o("#dr-reset-pass-error").text("").hide();if(e.addClass("was-validated"),!1===e[0].checkValidity())return!1;var n=e.find("button[type=submit]").addClass("sending").blur(),r={action:"drgc_pass_reset_request",nonce:drgc_params.ajaxNonce};if(o.each(e.serializeArray(),function(t,e){r[e.name]=e.value}),r.email!==r["email-confirm"])return a.text(drgc_params.translations.email_confirm_error_msg).show(),void n.removeClass("sending").blur();o.post(s,r,function(t){t.success?(o("#drResetPasswordModalBody").html("").html("\n                    <h3>".concat(drgc_params.translations.password_reset_title,"</h3>\n                    <p>").concat(drgc_params.translations.password_reset_msg,"</p>\n                ")),n.hide()):a.text(t.data[0].message).show(),n.removeClass("sending").blur()})}),o("form.dr-confirm-password-reset-form").on("submit",function(t){t.preventDefault();var e=o(this),a=e.find(".dr-form-error-msg").text("").hide();if(e.addClass("was-validated"),!1===e[0].checkValidity())return!1;var n=new URLSearchParams(window.location.search);if(n.get("key")&&n.get("login")){var r={action:"drgc_reset_password",nonce:drgc_params.ajaxNonce,key:n.get("key"),login:n.get("login")};o.each(e.serializeArray(),function(t,e){r[e.name]=e.value});var i=e.find("button[type=submit]").addClass("sending").blur();o.post(s,r,function(t){t.success?(o("section.reset-password").html("").html("\n                    <h3>".concat(drgc_params.translations.password_saved_title,"</h3>\n                    <p>").concat(drgc_params.translations.password_saved_msg,"</p>\n                ")).css("color","green"),setTimeout(function(){return location.replace("".concat(location.origin).concat(location.pathname))},2e3)):t.data&&a.text(t.data).show(),i.removeClass("sending").blur()})}else a.text(drgc_params.translations.undefined_error_msg).show()}),o("section.logged-in").length&&o("section.dr-login-sections__section.logged-in").length&&!drgc_params.cart.cart.lineItems.hasOwnProperty("lineItem")&&o("section.dr-login-sections__section.logged-in > div").hide()}),jQuery(document).ready(function(d){var l=new(function(){function t(){_classCallCheck(this,t),this.domain=drgc_params.domain,this.apiBaseUrl="https://"+this.domain+"/v1/shoppers",this.drLocale=drgc_params.drLocale||"en_US"}return _createClass(t,[{key:"updateShopper",value:function(){var t=this;return new Promise(function(e,a){d.ajax({type:"POST",headers:{Authorization:"Bearer ".concat(drgc_params.accessToken)},url:"".concat(t.apiBaseUrl,"/me?locale=").concat(t.drLocale),success:function(t){e(t)},error:function(t){a(t)}})})}},{key:"getCart",value:function(){var t=this;return new Promise(function(e,a){d.ajax({type:"GET",headers:{Accept:"application/json",Authorization:"Bearer ".concat(drgc_params.accessToken)},url:"".concat(t.apiBaseUrl,"/me/carts/active"),success:function(t){e(t.cart)},error:function(t){a(t)}})})}},{key:"updateCart",value:function(n,r){var i=this;return new Promise(function(e,a){var t;d.ajax({type:"POST",headers:{Accept:"application/json",Authorization:"Bearer ".concat(drgc_params.accessToken)},url:(t="".concat(i.apiBaseUrl,"/me/carts/active?productId=").concat(n),r&&(t+="&quantity=".concat(r)),"true"==drgc_params.testOrder&&(t+="&testOrder=true"),t),success:function(t){e(t.cart),function(){var t=d(".dr-minicart-display");t.is(":visible")||t.fadeIn(200)}()},error:function(t){a(t)}})})}},{key:"removeLineItem",value:function(a){var n=this;return new Promise(function(t,e){d.ajax({type:"DELETE",headers:{Accept:"application/json",Authorization:"Bearer ".concat(drgc_params.accessToken)},url:"".concat(n.apiBaseUrl,"/me/carts/active/line-items/").concat(a),success:function(){t()},error:function(t){e(t)}})})}},{key:"getOffersByPoP",value:function(t){var n=this;return new Promise(function(e,a){d.ajax({type:"GET",headers:{Authorization:"Bearer ".concat(drgc_params.accessToken)},url:"".concat(n.apiBaseUrl,"/me/point-of-promotions/SiteMerchandising_").concat(t,"/offers?format=json&expand=all"),success:function(t){e(t),console.log("getOffers",t)},error:function(t){a(t)}})})}},{key:"getProductPricing",value:function(t){var n=this;return new Promise(function(e,a){d.ajax({type:"GET",headers:{Authorization:"Bearer ".concat(drgc_params.accessToken)},url:"".concat(n.apiBaseUrl,"/me/products/").concat(t,"/pricing?format=json&expand=all"),success:function(t){e(t)},error:function(t){a(t)}})})}},{key:"getProductInventoryStatus",value:function(t){var n=this;return new Promise(function(e,a){d.ajax({type:"GET",headers:{Authorization:"Bearer ".concat(drgc_params.accessToken)},url:"".concat(n.apiBaseUrl,"/me/products/").concat(t,"/inventory-status?format=json&expand=all"),success:function(t){e(t),console.log("getProductInventoryStatus",t)},error:function(t){a(t)}})})}}]),t}()),p=[];function i(t){var e=d(".dr-minicart-display"),a=d('<div class="dr-minicart-body"></div>'),n=d('<div class="dr-minicart-footer"></div>');if(p=t.lineItems&&t.lineItems.lineItem?t.lineItems.lineItem:[],d(".dr-minicart-count").text(t.totalItemsInCart),d(".dr-minicart-header").siblings().remove(),d("section.dr-login-sections__section.logged-in").length&&0==t.totalItemsInCart&&d("section.dr-login-sections__section.logged-in > div").hide(),p.length){var s='<ul class="dr-minicart-list">',r='<p class="dr-minicart-subtotal"><label>'.concat(drgc_params.translations.subtotal_label,"</label><span>").concat(t.pricing.formattedSubtotal,"</span></p>"),i='<a class="dr-btn" id="dr-minicart-view-cart-btn" href="'.concat(drgc_params.cartUrl,'">').concat(drgc_params.translations.view_cart_label,"</a>"),o='<a class="dr-btn" id="dr-minicart-checkout-btn" href="'.concat(drgc_params.checkoutUrl,'">').concat(drgc_params.translations.checkout_label,"</a>");p.forEach(function(t){var e=t.product.uri.replace("".concat(l.apiBaseUrl,"/me/products/"),""),a=Number(t.pricing.listPriceWithQuantity.value),n=Number(t.pricing.salePriceWithQuantity.value),r=t.pricing.formattedSalePriceWithQuantity,i="";i=n<a?'<del class="dr-strike-price">'.concat(a,'</del><span class="dr-sale-price">').concat(r,"</span>"):r;var o='\n                <li class="dr-minicart-item clearfix">\n                    <div class="dr-minicart-item-thumbnail">\n                        <img src="'.concat(t.product.thumbnailImage,'" alt="').concat(t.product.displayName,'" />\n                    </div>\n                    <div class="dr-minicart-item-info" data-product-id="').concat(e,'">\n                        <span class="dr-minicart-item-title">').concat(t.product.displayName,'</span>\n                        <span class="dr-minicart-item-qty">').concat(drgc_params.translations.qty_label,".").concat(t.quantity,'</span>\n                        <p class="dr-pd-price dr-minicart-item-price">').concat(i,'</p>\n                    </div>\n                    <a href="#" class="dr-minicart-item-remove-btn" aria-label="Remove" data-line-item-id="').concat(t.id,'">').concat(drgc_params.translations.remove_label,"</a>\n                </li>");s+=o}),s+="</ul>",a.append(s,r),n.append(i,o),e.append(a,n)}else{var c='<p class="dr-minicart-empty-msg">'.concat(drgc_params.translations.empty_cart_msg,"</p>");a.append(c),e.append(a)}}function o(t){console.log("errorStatus",t.status)}d("#dr-minicart".length)&&i(drgc_params.cart.cart),d(".dr-minicart-toggle, .dr-minicart-close-btn").click(function(t){t.preventDefault(),function(){var t=d(".dr-minicart-display");t.is(":visible")?t.fadeOut(200):t.fadeIn(200)}()}),d("body").on("click",".dr-buy-btn",function(t){t.preventDefault();var e=1,a=d(t.target),n=a.attr("data-product-id")?a.attr("data-product-id").toString():"",r=p.map(function(t){return{id:t.product.uri.replace("".concat(l.apiBaseUrl,"/me/products/"),""),quantity:t.quantity}});d("#dr-pd-offers").length&&(e=parseInt(d("#dr-pd-qty").val(),10)),r.forEach(function(t){t.id===n&&(e+=t.quantity)}),l.updateCart(n,e).then(function(t){return i(t)}).catch(function(t){return o(t)})}),d(".dr-minicart-display").on("click",".dr-minicart-item-remove-btn",function(t){t.preventDefault();var e=d(t.target).data("line-item-id");l.removeLineItem(e).then(function(){return l.getCart()}).then(function(t){return i(t)}).catch(function(t){return o(t)})}),d("span.dr-pd-qty-plus, span.dr-pd-qty-minus").on("click",function(t){var e=d("#dr-pd-qty"),a=parseInt(e.val(),10),n=parseInt(e.attr("max"),10),r=parseInt(e.attr("min"),10),i=parseInt(e.attr("step"),10);a?d(t.currentTarget).is(".dr-pd-qty-plus")?n&&n<=a?e.val(n):e.val(a+i):d(t.currentTarget).is(".dr-pd-qty-minus")&&(r&&a<=r?e.val(r):1<a&&e.val(a-i)):e.val("1")}),d(".dr_prod-variations select").on("change",function(t){t.preventDefault();var e=d(this).val(),a=d(this).children("option:selected").data("price"),n=d(this).children("option:selected").data("regular-price"),r=d(this).children("option:selected").data("sale-price-value"),i=d(this).children("option:selected").data("list-price-value"),o=d(".single-dr_product .dr-pd-content .dr-pd-price"),s="";d(".dr-buy-btn").attr("data-product-id",e),r<i&&(s='<del class="dr-strike-price">'+n+"</del>"),s+="<strong>"+a+"</strong>",o.html(s)}),d("iframe[name^='controller-']").css("display","none")}),jQuery(document).ready(function(a){a(".dr-thank-you-wrapper").length&&a(document).on("click","#print-button",function(){var t=a(".dr-thank-you-wrapper").html(),e=document.body.innerHTML;document.body.innerHTML=t,window.print(),document.body.innerHTML=e})});